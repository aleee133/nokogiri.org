<!doctype html>
  <!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
  <!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
  <!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
  <!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->

  
    
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Installing Nokogiri - Nokogiri 鋸</title>
    <meta name="author" content="Team Sparklemotion">
    
    <meta name="description" content="Documentation for Nokogiri, a Ruby XML and HTML library ("gem").">
    
    <meta name="viewport" content="width=device-width">
    <link rel="canonical" href="https://sparklemotion.github.io/tutorials/installing_nokogiri.html">
    
    <link href="/nokogiri.org/favicon.png" rel="icon">
    <link href="/nokogiri.org/stylesheets/screen.css" media="screen, projection" rel="stylesheet">
    <link href="/nokogiri.org" rel="alternate" title="Nokogiri 鋸" type="application/atom+xml">
  </head>


  <body >

    <header>
      <div class="grid-wrapper">
  <div class="grid">

    <div class="grid__item one-fifth lap-four-sixths palm-one-whole">
  <a href="/" class="site-title">Nokogiri 鋸</a>
</div>

<div class="grid__item four-fifths lap-two-sixths palm-one-whole">
  <nav>
    <input type="checkbox" id="toggle">
<label for="toggle" class="toggle" data-open="Main Menu" data-close="Close Menu"></label>
<ul class="menu pull-left">
  <li><a href="http://rdoc.info/github/sparklemotion/nokogiri" target="_blank">Docs</a></li>
  <li><a href="https://github.com/sparklemotion/nokogiri" target="_blank">GitHub</a></li>
</ul>
<ul class="menu pull-right">
  <li><a href="/tutorials/installing_nokogiri.html"><b>Installation</b></a></li>
  <li><a href="/tutorials/"><b>Tutorials</b></a></li>
  <li><a href="/tutorials/getting_help.html"><b>Getting Help</b></a></li>
</ul>

  </nav>
</div>


  </div>
</div>
    </header>

    

    <div class="grid-wrapper">
      <div class="grid grid-center">
        
        <div class="grid__item two-thirds lap-one-whole palm-one-whole">
        

          <article class="page">

  
  <header>
    <h1 class="title indent">
      Installing Nokogiri
    </h1>
  </header>
  <hr class="divider">
  

  <h1>Installing Nokogiri</h1>

<p>Because Nokogiri needs to be <a href="http://en.wikipedia.org/wiki/Compiler">compiled</a> and <a href="http://en.wikipedia.org/wiki/Dynamic_linker">dynamically linked</a>
against both <a href="http://xmlsoft.org/index.html">libxml2</a> and <a href="http://xmlsoft.org/xslt/">libxslt</a>, it has gained a
reputation for being complicated to install.</p>

<p>Let&rsquo;s wrassle this little myth to the ground, shall we?</p>

<h2>Ubuntu / Debian</h2>

<p>Ubuntu doesn&rsquo;t come with the Ruby development packages that are
required for building gems with C extensions. Here are the commands to
install everything you might need:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="c"># ruby developer packages</span>
</span><span class='line'>sudo apt-get install ruby1.8-dev ruby1.8 ri1.8 rdoc1.8 irb1.8
</span><span class='line'>sudo apt-get install libreadline-ruby1.8 libruby1.8 libopenssl-ruby
</span><span class='line'>
</span><span class='line'><span class="c"># nokogiri requirements</span>
</span><span class='line'>sudo apt-get install libxslt-dev libxml2-dev
</span><span class='line'>sudo gem install nokogiri
</span></code></pre></td></tr></table></div></figure>


<p>Although, if you&rsquo;re using Hardy (8.04) or earlier, you&rsquo;ll need to install slightly different packages:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'><span class="c"># nokogiri requirements for Hardy (8.04) and earlier</span>
</span><span class='line'>sudo apt-get install libxslt1-dev libxml2-dev
</span></code></pre></td></tr></table></div></figure>


<p>As <a href="http://rubyforge.org/pipermail/nokogiri-talk/2009-March/000181.html">John Barnette once said</a>, &ldquo;Isn&rsquo;t package management convenient? :)&rdquo;</p>

<h2>Mac OS X</h2>

<p>Most developers are using homebrew to manage their packages these
days. If you are, you&rsquo;re in luck:</p>

<h3>homebrew 0.9.5+</h3>

<p>Things pretty much Just Work™ these days. To use nokogiri with its
vendored libxml2 and libxslt you only need to install libiconv:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>gem install nokogiri
</span></code></pre></td></tr></table></div></figure>


<h3>Troubleshooting</h3>

<p>If you have problems mentioning libiconv missing that looks something like this:</p>

<pre><code>Installing nokogiri (1.6.2.1) Building nokogiri using packaged libraries.

Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

    /usr/local/rvm/rubies/ruby-2.0.0-p0/bin/ruby extconf.rb
Building nokogiri using packaged libraries.
checking for iconv.h... yes
checking for iconv_open() in iconv.h... no
checking for iconv_open() in -liconv... no
checking for libiconv_open() in iconv.h... no
checking for libiconv_open() in -liconv... no
-----
libiconv is missing.  please visit http://nokogiri.org/tutorials/installing_nokogiri.html for help with installing dependencies.
-----
*** extconf.rb failed ***
</code></pre>

<p>Then you are probably missing the right developer tools. This is a really easy fix:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>brew unlink gcc-4.2      <span class="c"># you might not need this step</span>
</span><span class='line'>gem uninstall nokogiri
</span><span class='line'>xcode-select --install
</span><span class='line'>gem install nokogiri
</span></code></pre></td></tr></table></div></figure>


<p>This is verified working on OSX 10.9 w/ xcode&rsquo;s clang compiler.</p>

<p>Many thanks to @allaire and others for helping verify this.</p>

<h3>Other tips:</h3>

<ul>
<li>Make sure ruby is compiled with the latest clang compiler.</li>
<li>Ruby is no longer dependent upon gcc-4.2.</li>
<li>Binary gems and ruby really should be compiled with the same compiler/environment.</li>
<li>If you have multiple versions of xcode installed, make sure you use the right xcode-select.</li>
</ul>


<p>If you have any other issues, please file an issue (preferably a new
one) and pull in @zenspider.</p>

<h2>Red Hat / CentOS</h2>

<p>The easiest way to get Nokogiri installed on CentOS and RHEL seems to be the
<a href="http://fedoraproject.org/wiki/EPEL">EPEL</a> repository which contains a prebuilt nokogiri package. To use it,
install the appropriate <a href="http://fedoraproject.org/wiki/EPEL#How_can_I_use_these_extra_packages.3F">epel-release</a> package for your OS, then run:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>sudo yum install -y rubygem-nokogiri
</span></code></pre></td></tr></table></div></figure>


<p>To install using gem install is somewhat more complicated because of the age of
the packages available from the central repositories. If you have rubygems
installed, you may be able to install nokogiri via <code>gem install</code>. If you run
intro problems, try installing these packages as well.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>sudo yum install -y gcc ruby-devel libxml2 libxml2-devel libxslt libxslt-devel
</span></code></pre></td></tr></table></div></figure>


<p>CentOS 5 (and RHEL5) come installed with libxml 2.6.26 which, while not as
offensively out-of-date as Mac Leopard, is still pretty damn old (<a href="http://mail.gnome.org/archives/xml/2006-June/msg00043.html">released
June 2006</a>) and has <a href="http://github.com/sparklemotion/nokogiri/issues#issue/243">known</a> <a href="http://github.com/sparklemotion/nokogiri/issues#issue/122">issues</a>.</p>

<p>If you&rsquo;re affected by any known bugs or are seeing odd behavior, you
may want to consider uninstalling the RPMs for libxml2 and libxslt,
and building them from source.</p>

<ol>
<li><code>sudo yum remove -y libxml2-devel libxslt-devel</code></li>
<li>download the most recent libxml2 and libxslt from <a href="ftp://xmlsoft.org/libxml2/">ftp://xmlsoft.org/libxml2/</a></li>
<li><code>./configure ; make ; sudo make install</code></li>
</ol>


<p>Then install nokogiri specifying the libxml2 and libxslt install directories:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>sudo gem install nokogiri -- --with-xml2-lib<span class="o">=</span>/usr/local/lib <span class="se">\</span>
</span><span class='line'>                             --with-xml2-include<span class="o">=</span>/usr/local/include/libxml2 <span class="se">\</span>
</span><span class='line'>                             --with-xslt-lib<span class="o">=</span>/usr/local/lib <span class="se">\</span>
</span><span class='line'>                             --with-xslt-include<span class="o">=</span>/usr/local/include
</span></code></pre></td></tr></table></div></figure>


<p>(Note that, by default, libxslt header files are installed into the
root include directory, but libxml2 header files are installed into a
subdirectory thereof named <code>libxml2</code>.)</p>

<p>Or, you know, whatever directories into which you installed libxml and
libxslt. Good luck.</p>

<h2>Nonstandard libxml2 / libxslt installations</h2>

<p>If you&rsquo;ve got libxml2 and/or libxslt installed in a nonstandard place
(read as &ldquo;not /opt/local, /usr/local, /usr or the standard Ruby
directories&rdquo;), you can use command-line parameters to the <code>gem
install</code> command to grease the wheels:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>gem install nokogiri -- --with-xml2-dir<span class="o">=</span>/home/joe/builds <span class="se">\</span>
</span><span class='line'>                        --with-xslt-dir<span class="o">=</span>/home/joe/builds
</span></code></pre></td></tr></table></div></figure>


<p>Or, you can specify include and library directories separately:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>gem install nokogiri -- --with-xml2-lib<span class="o">=</span>/home/joe/builds/lib <span class="se">\</span>
</span><span class='line'>                        --with-xml2-include<span class="o">=</span>/home/joe/builds/include/libxml2 <span class="se">\</span>
</span><span class='line'>                        --with-xslt-lib<span class="o">=</span>/home/joe/builds/lib <span class="se">\</span>
</span><span class='line'>                        --with-xslt-include<span class="o">=</span>/home/joe/builds/include
</span></code></pre></td></tr></table></div></figure>


<p>Note that, by default, libxslt header files are installed into the
root include directory, but libxml2 header files are installed into a
subdirectory thereof named <code>libxml2</code>.</p>

<h2>Windows</h2>

<p>Luckily for you, building on Windows is so difficult that we&rsquo;ve done
it for you: Nokogiri comes bundled with all the DLLs you need to be
NOKOGIRIFIED!</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>gem install nokogiri
</span></code></pre></td></tr></table></div></figure>





</article>


        </div>

        
      </div>
    </div>

    <footer>
      <div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item">
      <p class="copyright">
  <span class="pull-left">
    Contribute to these docs at <a href="//github.com/sparklemotion/nokogiri.org-tutorials">sparklemotion/nokogiri.org-tutorials</a>.
  </span>
  <span class="pull-right">
    Powered by <a href="//octopress.org/">Octopress</a>. Theme is <a href="//github.com/coogie/oscailte">Oscailte</a>.
  </span>
</p>

    </div>
  </div>
</div>

    </footer>

    <!--[if lt IE 7]>
      <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
    <![endif]-->

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
<script src="//crypto-js.googlecode.com/svn/tags/3.1.2/build/rollups/md5.js"></script>
<script defer src="/nokogiri.org/javascripts/octopress.js"></script>







  </body>
</html>