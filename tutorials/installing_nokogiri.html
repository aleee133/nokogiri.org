<!doctype html>
  <!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
  <!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
  <!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
  <!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->

  
    
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Installing Nokogiri - Nokogiri 鋸</title>
    <meta name="author" content="Team Sparklemotion">
    
    <meta name="description" content="Documentation for Nokogiri, a Ruby XML and HTML library.">
    
    <meta name="viewport" content="width=device-width">
    <link rel="canonical" href="http://nokogiri.org/tutorials/installing_nokogiri.html">
    
    <link href="/favicon.png" rel="icon">
    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet">
    <link href="" rel="alternate" title="Nokogiri 鋸" type="application/atom+xml">
  </head>


  <body >

    <header>
      <div class="grid-wrapper">
  <div class="grid">

    <div class="grid__item one-fifth lap-four-sixths palm-one-whole">
  <a href="/" class="site-title">Nokogiri 鋸</a>
</div>

<div class="grid__item four-fifths lap-two-sixths palm-one-whole">
  <nav>
    <input type="checkbox" id="toggle">
<label for="toggle" class="toggle" data-open="Main Menu" data-close="Close Menu"></label>
<ul class="menu pull-left">
  <li><a href="http://rdoc.info/github/sparklemotion/nokogiri" target="_blank">Docs</a></li>
  <li><a href="https://github.com/sparklemotion/nokogiri" target="_blank">GitHub</a></li>
</ul>
<ul class="menu pull-right">
  <li><a href="/tutorials/installing_nokogiri.html"><b>Installation</b></a></li>
  <li><a href="/tutorials/"><b>Tutorials</b></a></li>
  <li><a href="/tutorials/getting_help.html"><b>Getting Help</b></a></li>
</ul>

  </nav>
</div>


  </div>
</div>
    </header>

    

    <div class="grid-wrapper">
      <div class="grid grid-center">
        
        <div class="grid__item two-thirds lap-one-whole palm-one-whole">
        

          <article class="page">

  
  <header>
    <h1 class="title indent">
      Installing Nokogiri
    </h1>
  </header>
  <hr class="divider">
  

  <h1>Installing Nokogiri</h1>

<p>Because Nokogiri needs to be <a href="http://en.wikipedia.org/wiki/Compiler">compiled</a> and <a href="http://en.wikipedia.org/wiki/Dynamic_linker">dynamically linked</a>
against both <a href="http://xmlsoft.org/index.html">libxml2</a> and <a href="http://xmlsoft.org/xslt/">libxslt</a>, it has gained a
reputation for being complicated to install.</p>

<p>As of Nokogiri 1.6, <code>libxml2</code> and <code>libxslt</code> source code is bundled
with Nokogiri, and compiled at gem-install-time. This document should
work for all versions 1.6.4 and later.</p>

<p>(If you need support for installing earlier versions of Nokogiri, you
may want to take a look at the git history for <a href="https://github.com/sparklemotion/nokogiri.org-tutorials/blob/master/content/installing_nokogiri.md">this document</a>.)</p>

<p>Let&rsquo;s tackle each platform and scenario in ascending order of difficulty &hellip;</p>

<h2>Ubuntu / Debian</h2>

<p>Installation should Just Work™ on Ubuntu and Debian using Nokogiri&rsquo;s
vendored <code>libxml2</code> and <code>libxslt</code>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>gem install nokogiri
</span></code></pre></td></tr></table></div></figure>


<p>Please report it as a bug if this doesn&rsquo;t work for you (see
<a href="http://www.nokogiri.org/tutorials/getting_help.html">Getting Help</a> for details).</p>

<h2>Windows</h2>

<p>Luckily for you, building on Windows is so difficult that we&rsquo;ve done
it for you: Nokogiri comes bundled with all the DLLs you need to be
NOKOGIRIFIED!</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>gem install nokogiri
</span></code></pre></td></tr></table></div></figure>


<p>Please note that at this time, building Nokogiri with DevKit may work,
but is unsupported. If you feel strongly that this should be
supported, we&rsquo;d love to talk about it on <code>nokogiri-talk</code>!</p>

<h2>Red Hat / CentOS</h2>

<p>The easiest way to get Nokogiri installed on CentOS and RHEL seems to be the
<a href="http://fedoraproject.org/wiki/EPEL">EPEL</a> repository which contains a prebuilt nokogiri package. To use it,
install the appropriate <a href="http://fedoraproject.org/wiki/EPEL#How_can_I_use_these_extra_packages.3F">epel-release</a> package for your OS, then run:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>sudo yum install -y rubygem-nokogiri
</span></code></pre></td></tr></table></div></figure>


<p>However, installation of the regular gem should Just Work™ using
Nokogiri&rsquo;s vendored <code>libxml2</code> and <code>libxslt</code>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>gem install nokogiri
</span></code></pre></td></tr></table></div></figure>


<p>If you have issues, make sure you have some of the basic Ruby
developer tools that you&rsquo;ll need to compile the C extension,
<code>libxml2</code>, and <code>libxslt</code>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>sudo yum install -y gcc ruby-devel
</span></code></pre></td></tr></table></div></figure>


<p>Please report it as a bug if this doesn&rsquo;t work for you (see
<a href="http://www.nokogiri.org/tutorials/getting_help.html">Getting Help</a> for details).</p>

<h2>Mac OS X</h2>

<p>Most developers are using homebrew to manage their packages these
days. If you are, you&rsquo;re in luck.</p>

<h3>homebrew 0.9.5+</h3>

<p>Installation should Just Work™ using Nokogiri&rsquo;s vendored <code>libxml2</code> and
<code>libxslt</code>:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>gem install nokogiri
</span></code></pre></td></tr></table></div></figure>


<p>However, you may need to jump through some hoops around <code>libiconv</code> &hellip; (see next section)</p>

<h3>Troubleshooting</h3>

<p>If you have problems mentioning libiconv missing that looks something like this:</p>

<pre><code>Installing nokogiri (1.6.4) Building nokogiri using packaged libraries.

Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.

    /usr/local/rvm/rubies/ruby-2.0.0-p0/bin/ruby extconf.rb
Building nokogiri using packaged libraries.
checking for iconv.h... yes
checking for iconv_open() in iconv.h... no
checking for iconv_open() in -liconv... no
checking for libiconv_open() in iconv.h... no
checking for libiconv_open() in -liconv... no
-----
libiconv is missing.  please visit http://nokogiri.org/tutorials/installing_nokogiri.html for help with installing dependencies.
-----
*** extconf.rb failed ***
</code></pre>

<p>Then you are probably missing the right developer tools. This is a really easy fix:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>brew unlink gcc-4.2      <span class="c"># you might not need this step</span>
</span><span class='line'>gem uninstall nokogiri
</span><span class='line'>xcode-select --install
</span><span class='line'>gem install nokogiri
</span></code></pre></td></tr></table></div></figure>


<p>This is verified working on OSX 10.9 w/ xcode&rsquo;s clang compiler.</p>

<p>(Many thanks to @allaire and others for helping verify this!)</p>

<h3>Other OS X tips</h3>

<ul>
<li>Make sure ruby is compiled with the latest clang compiler.</li>
<li>Ruby is no longer dependent upon gcc-4.2.</li>
<li>Binary gems and ruby really should be compiled with the same compiler/environment.</li>
<li>If you have multiple versions of xcode installed, make sure you use the right xcode-select.</li>
</ul>


<p>If you have any other issues, please file an issue (preferably a new
one, read <a href="http://www.nokogiri.org/tutorials/getting_help.html">Getting Help</a> for details) and pull in @zenspider.</p>

<h2>Using Your System Libraries</h2>

<p>If, instead of Nokogiri&rsquo;s vendored libraries, you&rsquo;d like to use your
system&rsquo;s <code>libxml2</code>, <code>libxslt</code> and related libraries, please first
understand that you may be asking Nokogiri to work with an unsupported
version of <code>libxml2</code>. We try hard to warn you about this; and will
even refuse to compile against some known-bad versions of <code>libxml2</code>.</p>

<p>But, we want to give you the flexibility to choose this option.</p>

<p>Here&rsquo;s how to ignore Nokogiri&rsquo;s vendored libraries and use your
installed system libraries (assuming they&rsquo;re installed somewhere
reasonable, like /opt/local, /usr/local, /usr or the standard Ruby
directories):</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>gem install nokogiri -- --use-system-libraries
</span></code></pre></td></tr></table></div></figure>


<p>Or, if you&rsquo;re using Bundler:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>bundle config build.nokogiri --use-system-libraries
</span><span class='line'>bundle install
</span></code></pre></td></tr></table></div></figure>


<h2>Using Nonstandard libxml2 / libxslt installations</h2>

<p>If you&rsquo;ve got libxml2 and/or libxslt installed in a nonstandard place
(read as &ldquo;not /opt/local, /usr/local, /usr or the standard Ruby
directories&rdquo;), you can use command-line parameters to the <code>gem
install</code> command to grease the wheels.</p>

<p>If you&rsquo;ve got the proper <code>config</code> scripts:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>gem install nokogiri -- <span class="se">\</span>
</span><span class='line'>    --use-system-libraries <span class="se">\</span>
</span><span class='line'>    --with-xml2-config<span class="o">=</span>/path/to/xml2-config <span class="se">\</span>
</span><span class='line'>    --with-xslt-config<span class="o">=</span>/path/to/xslt-config
</span></code></pre></td></tr></table></div></figure>


<p>or, you can specify the installation root directory:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>gem install nokogiri -- <span class="se">\</span>
</span><span class='line'>    --use-system-libraries <span class="se">\</span>
</span><span class='line'>    --with-xml2-dir<span class="o">=</span>/path/to/dir <span class="se">\</span>
</span><span class='line'>    --with-xslt-dir<span class="o">=</span>/path/to/dir
</span></code></pre></td></tr></table></div></figure>


<p>or, you can specify include and library directories separately:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>gem install nokogiri -- <span class="se">\</span>
</span><span class='line'>    --use-system-libraries <span class="se">\</span>
</span><span class='line'>    --with-xml2-lib<span class="o">=</span>/path/to/builds/lib <span class="se">\</span>
</span><span class='line'>    --with-xml2-include<span class="o">=</span>/path/to/builds/include/libxml2 <span class="se">\</span>
</span><span class='line'>    --with-xslt-lib<span class="o">=</span>/path/to/builds/lib <span class="se">\</span>
</span><span class='line'>    --with-xslt-include<span class="o">=</span>/path/to/builds/include
</span></code></pre></td></tr></table></div></figure>


<p>N.B.: By default, libxslt header files are installed into the
root include directory, but libxml2 header files are installed into a
subdirectory thereof named <code>libxml2</code>.</p>

<p>It&rsquo;s likely that you&rsquo;ll also need to specify the location of your
<code>zlib</code> and <code>iconv</code> (and possibly <code>exslt</code>) install directories as
well. In that case, you can add the options:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='sh'><span class='line'>gem install nokogiri -- <span class="se">\</span>
</span><span class='line'>    --use-system-libraries <span class="se">\</span>
</span><span class='line'>    <span class="c"># ...</span>
</span><span class='line'>    --with-iconv-dir<span class="o">=</span>/path/to/dir <span class="se">\</span>
</span><span class='line'>    --with-zlib-dir<span class="o">=</span>/path/to/dir <span class="se">\</span>
</span><span class='line'>    <span class="o">[</span>--with-exslt-dir<span class="o">=</span>/path/to/dir<span class="o">]</span>
</span><span class='line'>    <span class="o">[</span>--with-exslt-config<span class="o">=</span>/path/to/exslt-config<span class="o">]</span>
</span></code></pre></td></tr></table></div></figure>


<h2>Other</h2>

<p>Don&rsquo;t see your platform here? We&rsquo;d love to add to this
document. Please feel free to send pull requests to
<a href="https://github.com/sparklemotion/nokogiri.org-tutorials">sparklemotion/nokogiri.org-tutorials</a>.</p>


</article>


        </div>

        
      </div>
    </div>

    <footer>
      <div class="grid-wrapper">
  <div class="grid">
    <div class="grid__item">
      <p class="copyright">
  <span class="pull-left">
    Contribute to these docs at <a href="//github.com/sparklemotion/nokogiri.org-tutorials">sparklemotion/nokogiri.org-tutorials</a>.
  </span>
  <span class="pull-right">
    Powered by <a href="//octopress.org/">Octopress</a>. Theme is <a href="//github.com/coogie/oscailte">Oscailte</a>.
  </span>
</p>

    </div>
  </div>
</div>

    </footer>

    <!--[if lt IE 7]>
      <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
    <![endif]-->

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
<script src="//crypto-js.googlecode.com/svn/tags/3.1.2/build/rollups/md5.js"></script>
<script defer src="/javascripts/octopress.js"></script>







  </body>
</html>